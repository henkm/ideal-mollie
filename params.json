{"name":"iDeal-mollie gem","tagline":"A Ruby implementation for handling Mollie iDeal transactions","body":"# Ideal Mollie (ideal-mollie)\r\n[![Build Status](https://secure.travis-ci.org/manuelvanrijn/ideal-mollie.png?branch=master)][travis] [![Dependency Status](https://gemnasium.com/manuelvanrijn/ideal-mollie.png)][gemnasium]\r\n\r\n[travis]: http://travis-ci.org/manuelvanrijn/ideal-mollie\r\n[gemnasium]: https://gemnasium.com/manuelvanrijn/ideal-mollie\r\n\r\nA simple Ruby implementation for handling iDeal transactions with the [Mollie API](https://www.mollie.nl/support/documentatie/betaaldiensten/ideal/).\r\n\r\nHere you can find the [Documentation](http://rubydoc.info/github/manuelvanrijn/ideal-mollie/master/frames)\r\n\r\n## Getting started\r\n\r\n### Install\r\n\r\nTo install the gem you could execute\r\n\r\n```\r\nsudo gem install ideal-mollie\r\n```\r\n\r\nOr you could add the gem into your `Gemfile`.\r\n\r\n```\r\ngem 'ideal-mollie'\r\n```\r\n\r\nFinally, if you don’t dig any of that gemming that’s so popular nowadays, you can install it as a plugin;\r\n\r\n```\r\ncd vendor/plugins\r\ngit clone --depth 1 git://github.com/manuelvanrijn/ideal-mollie.git ideal-mollie\r\n```\r\n\r\n### Configuration\r\n\r\nAdd the following config parameters to your environment config file\r\n\r\n```\r\nconfig.ideal_mollie.partner_id = 123456\r\nconfig.ideal_mollie.report_url = \"http://example.org/report\"\r\nconfig.ideal_mollie.return_url = \"http://example.org/return\"\r\nconfig.ideal_mollie.test_mode = false\r\n```\r\n\r\nOptionally you can add a profile_key if you have multiple profile's\r\n\r\n```\r\nconfig.ideal_mollie.profile_key = \"123abc45\"\r\n```\r\n\r\n## Rails Example\r\n\r\nBelow you will find a simple `TransactionController` and a view to display the bank selectbox. Note that this is just a very basic example.\r\n\r\n### Transaction Controller\r\n\r\n```ruby\r\nclass TransactionsController < ApplicationController\r\n  def index\r\n    @banks = IdealMollie.banks\r\n  end\r\n\r\n  def start\r\n    # redirect to banks if there is no bank_id given\r\n    redirect_to transaction_path if params[:bank_id].nil?\r\n    bank_id = params[:bank_id]\r\n\r\n    # 10,00 EUR\r\n    request = IdealMollie.new_order(1000, 'some payment description', bank_id)\r\n\r\n    transaction_id = request.transaction_id\r\n\r\n    # TODO: store the transaction_id like:\r\n    # For example:\r\n    #   my_order = MyOrderObject.find(id)\r\n    #   my_order.transaction_id = transaction_id\r\n    #   my_order.save\r\n\r\n    redirect_to request.url\r\n  end\r\n\r\n  def check\r\n    transaction_id = params[:transaction_id]\r\n    response = IdealMollie.check_order(transaction_id)\r\n\r\n    if response.paid\r\n      # TODO: store the result information for the paid payment\r\n      # For example:\r\n      #   my_order = MyOrder.find_by_transaction_id(transaction_id)\r\n      #   my_order.paid = true\r\n      #   my_order.paid_on = Time.now\r\n      #   my_order.customer_name = response.customer_name\r\n      #   my_order.customer_account = response.customer_account\r\n      #   my_order.customer_city = response.customer_city\r\n      #   my_order.save\r\n    else\r\n      # TODO: store the result information for the canceled payment\r\n      # For example:\r\n      #   my_order = MyOrder.find_by_transaction_id(transaction_id)\r\n      #   my_order.paid = false\r\n      #   my_order.save\r\n    end\r\n    render :nothing => true\r\n  end\r\n\r\n  def result\r\n    transaction_id = params[:transaction_id]\r\n    # TODO show the result\r\n    # For example:\r\n    #   my_order = MyOrder.find_by_transaction_id(transaction_id)\r\n    #   if my_order.paid\r\n    #     render :text => \"Thank you for your payment.\"\r\n    #   else\r\n    #     render :text => \"Transaction has been cancelled or couldn't complete\"\r\n    #   end\r\n  end\r\nend\r\n```\r\n\r\n### View (transactions/index.html.erb)\r\n\r\n```erb\r\n<%= form_tag transaction_start_path, :method => :post do %>\r\n  <%= select_tag \"bank_id\", options_from_collection_for_select(@banks, \"id\", \"name\") %>\r\n  <%= button_submit_tag \"Checkout\" %>\r\n<% end %>\r\n```\r\n\r\n## Changelog\r\n\r\nA detailed overview can be found in the [CHANGELOG](https://github.com/manuelvanrijn/ideal-mollie/blob/master/CHANGELOG.md).\r\n\r\n## Copyright\r\n\r\nCopyright © 2012 Manuel van Rijn. See [LICENSE](https://github.com/manuelvanrijn/ideal-mollie/blob/master/LICENSE.md) for further details.\r\n","google":"UA-17149124-1","note":"Don't delete this file! It's used internally to help with page regeneration."}