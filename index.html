<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>ideal-mollie - Manuel van Rijn</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ideal-mollie gem project page">
    <meta name="author" content="Manuel van Rijn">

    <!-- Le styles -->
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans" />
    <link rel="stylesheet" href="assets/style.css" />
    <link rel="stylesheet" href="assets/google-code-prettify/prettify.css" />
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap-responsive.min.css" />

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5sim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-target=".navbar" data-offset="50" id="home">

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#">ideal-mollie</a>
          <div class="nav-collapse">

            <ul class="nav">
              <li class="active"><a href="#home">Intro</a></li>
              <li><a href="#install">Install</a></li>
              <li><a href="#config">Config</a></li>
              <li><a href="#rails">Rails example</a></li>
              <li><a href="https://github.com/manuelvanrijn/ideal-mollie/blob/master/CHANGELOG.md">Changelog</a></li>
            </ul>

            <ul class="nav pull-right">
              <li>
                <a href="http://travis-ci.org/manuelvanrijn/ideal-mollie"><img src="https://secure.travis-ci.org/manuelvanrijn/ideal-mollie.png?branch=master" alt="Build Status" style="max-width:100%;"></a>
              </li>
              <li>
                <a href="https://gemnasium.com/manuelvanrijn/ideal-mollie"><img src="https://gemnasium.com/manuelvanrijn/ideal-mollie.png" alt="Dependency Status" style="max-width:100%;"></a>
              </li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <!-- INTRO
    ================================================== -->
    <header>
      <div class="container">
        <h1>iDeal-Mollie</h1>
        <p>A simple Ruby implementation for handling iDeal transactions with the Mollie API.</p>
        <div>
          <a class="btn btn-primary btn-large" href="https://github.com/manuelvanrijn/ideal-mollie"><i class="icon-eye-open icon-white"></i> View on GitHub</a>
          <a class="btn btn-inverse btn-large" href="http://rubydoc.info/github/manuelvanrijn/ideal-mollie/master/frames"><i class="icon-book icon-white"></i> View documentation</a>
        </div>
      </div>
    </header>

    <div class="container">


      <!-- INSTALL
      ================================================== -->
      <section id="install">
        <div class="row">
          <div class="span12 panel">
            <h4 class="header">Installing the gem</h4>
<pre class="prettyprint linenums content">
# To install the gem you could execute
sudo gem install ideal-mollie

# Or you could add the gem into your Gemfile.
gem 'ideal-mollie'

# Finally, if you don’t dig any of that gemming that’s so popular nowadays, you can install it as a plugin
cd vendor/plugins
git clone --depth 1 git://github.com/manuelvanrijn/ideal-mollie.git ideal-mollie
</pre>
          </div>
        </div>
      </section>

      <!-- CONFIG
      ================================================== -->
      <section id="config">
        <div class="page-header">
          <h2>Configuration</h2>
        </div>
        <div class="row">
          <div class="span6">
            <p>Add the following config parameters to your environment config file</p>
          </div>
          <div class="span6 panel">
            <h5 class="header">Configuration</h5>
<pre class="prettyprint linenums content">
config.ideal_mollie.partner_id = 123456
config.ideal_mollie.report_url = "http://example.org/report"
config.ideal_mollie.return_url = "http://example.org/return"
config.ideal_mollie.test_mode = false
</pre>
          </div>
        </div>
        <div class="row">
          <div class="span6">
            <p>Optionally you can add a <strong>profile_key</strong> if you have multiple profile's</p>
          </div>
          <div class="span6 panel">
            <h5 class="header">Configuration</h5>
<pre class="prettyprint linenums content">
config.ideal_mollie.profile_key = "123abc45"
</pre>
          </div>
        </div>

      </section>

      <!-- RAILS EXAMPLE
      ================================================== -->
      <section id="rails">
        <div class="page-header">
          <h2>Ruby on Rails example
            <small>Controller and view code</small>
          </h2>
        </div>
        <div class="row">
          <div class="span12">
            <p>Below you will find a simple <code>TransactionController</code> and a view to display the bank selectbox. Note that this is just a very basic example.</p>
          </div>
        </div>
        <div class="row">
          <div class="span7 panel">
            <h5 class="header">transaction_controller.rb</h5>
<pre class="prettyprint linenums content">
class TransactionsController &lt; ApplicationController
  def index
    @banks = IdealMollie.banks
  end

  def start
    # redirect to banks if there is no bank_id given
    redirect_to transaction_path if params[:bank_id].nil?
    bank_id = params[:bank_id]

    # 10,00 EUR
    request = IdealMollie.new_order(1000, 'some payment description', bank_id)

    transaction_id = request.transaction_id

    # TODO: store the transaction_id like:
    # For example:
    #   my_order = MyOrderObject.find(id)
    #   my_order.transaction_id = transaction_id
    #   my_order.save

    redirect_to request.url
  end

  def check
    transaction_id = params[:transaction_id]
    response = IdealMollie.check_order(transaction_id)

    if response.paid
      # TODO: store the result information for the paid payment
      # For example:
      #   my_order = MyOrder.find_by_transaction_id(transaction_id)
      #   my_order.paid = true
      #   my_order.paid_on = Time.now
      #   my_order.customer_name = response.customer_name
      #   my_order.customer_account = response.customer_account
      #   my_order.customer_city = response.customer_city
      #   my_order.save
    else
      # TODO: store the result information for the canceled payment
      # For example:
      #   my_order = MyOrder.find_by_transaction_id(transaction_id)
      #   my_order.paid = false
      #   my_order.save
    end
    render :nothing => true
  end

  def result
    transaction_id = params[:transaction_id]
    # TODO show the result
    # For example:
    #   my_order = MyOrder.find_by_transaction_id(transaction_id)
    #   if my_order.paid
    #    render :text => "Thank you for your payment."
    #   else
    #    render :text => "Transaction has been cancelled or couldn't complete"
    #   end
  end
end
</pre>

          </div>
          <div class="span5 panel">
              <h5 class="header">transactions/index.html.erb</h5>
<pre class="prettyprint content">
&lt;%= form_tag transaction_start_path, :method =&gt; :post do %&gt;
  &lt;%= select_tag &quot;bank_id&quot;, options_from_collection_for_select(
                              @banks, &quot;id&quot;, &quot;name&quot;
                            ) %&gt;
  &lt;%= button_submit_tag &quot;Checkout&quot; %&gt;
&lt;% end %&gt;
</pre>

          </div>
        </div>
      </section>

      <!-- FOOTER
      ================================================== -->
      <footer class="footer">
        <p class="pull-right"><a href="#home">Back to top</a></p>
        <p>
          <a href="https://github.com/manuelvanrijn/ideal-mollie">ideal-mollie</a> is built and maintained by <a href="http://manuel.manuelles.nl/">Manuel van Rijn</a>.
          Follow me on <a href="http://twitter.com/manuelvanrijn/">Twitter</a>, <a href="https://github.com/manuelvanrijn/">GitHub</a> and <a rel="me" href="https://plus.google.com/u/0/117895812778172164201?rel=author">Google+</a>.</p>
      </footer>

    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="assets/google-code-prettify/prettify.js"></script>
    <script src="assets/bootstrap/js/bootstrap.js"></script>
    <script>$(function () { prettyPrint() })</script>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-17149124-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
